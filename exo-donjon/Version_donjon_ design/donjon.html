<!doctype html>
<html lang="fr">

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
    integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
    crossorigin="anonymous"></script>
  <title></title>
  <style>
    #donjon {
      width: 16rem;
      border-radius: 30px;
    }

    .winner {
      color: #11e984;
      font-weight: 500;
      font-size: 3.5rem;
      margin-bottom: 40px;
      text-shadow: 0 2px 5px rgba(255, 255, 255, 0.5);
    }

    #chevalier {
      width: 8rem;
      border-radius: 30px;
    }

    .shadow-box {
      box-shadow: 0 2.5px 7px #f5bc00;
    }

    .shadow-aventurier {
      box-shadow: 0 2.5px 7px #dc3545;
    }

    .shadow-mDonjon {
      box-shadow: 0 2.5px 7px #0d6efd;
    }

    .shadow-aventurier2 {
      box-shadow: 3px 0px 5px #dc3545;
    }

    .shadow-mDonjon2 {
      box-shadow: 3px 0px 5px #0d6efd;
    }

    #maitreDonjon {
      width: 8rem;
      border-radius: 30px;
    }

    .rounded-50 {
      border-radius: 50px;
    }

    .rounded-20 {
      border-radius: 20px;
    }

    .rounded-15 {
      border-radius: 15px;
    }
  </style>
</head>


<!--content start-->

<body class="bg-dark text-white">

  <div class="container-fluid row m-0">
    <h1 class="text-uppercase text-warning text-center display-3 pb-5"><b>La bataille du donjon</b></h1>

    <div>
      <input type="checkbox" id="pvDonjon" name="pvDonjon" class="pe-1" checked>
      <label for="pvDonjon"></label><b>Points de vie et de défense alléatoire ?</b>
    </div>
    <div class="col-4 text-center align-items-stretch my-auto mt-5 my-auto border rounded-15 p-2 shadow-box">
      <h3><b>Choisisser votre arme :</b></h3>
      <label for="arme">Séléctionner votre arme :</label>
      <select id="arme" onchange="choixArme()">
        <option value="2">ARME EN BOIS : Attaque : 2</option>
        <option value="5">ARME EN FER : Attaque : 5</option>
        <option value="10">ARME MAGIQUE : Attaque : 10</option>
      </select>
      <p id="selectionArme"></p>
    </div>
    <div class="col-4 text-center mx-0 align-items-center my-auto ">
      <img id="chevalier" class="ps-2 shadow-aventurier2" src="chevalier.jpg">
      <img id="maitreDonjon" class="ps-2 shadow-mDonjon2" src="maitre-donjon.jpg">
      <img id="donjon" src="donjonl.jpg">
      <button type="button" class="my-5 btn btn-danger rounded-50 btn-sm text-white p-3"
        onclick="combattre()"><b>Commencer
          le
          combat!!</b></button>
    </div>
    <div class="col-4 text-center align-items-stretch my-auto mt-5 my-auto border rounded-15 p-2 shadow-box">
      <h3><b>Choisisser votre Armure :</b></h3>
      <label class="rounded-15" for="armure">Séléctionner votre armure :</label>
      <select id="armure" onchange="choixArmure()">
        <option value="1">ARMURE EN BOIS : Défense : 1</option>
        <option value="3">ARMURE EN FER : Défense : 3</option>
        <option value="5">ARMURE MAGIQUE : Défense : 5</option>
      </select>
      <p id="selectionArmure"></p>

    </div>
  </div>


  <div class="container">
    <div class="row d-flex justify-content-center align-items-center text-dark m-0" id="resultat"></div>
    <div class="row d-flex justify-content-center align-items-center text-dark m-0" id="debutCombat"></div>

  </div>
  <script>

    function choixArme() {
      let x = document.getElementById("arme").value;
      document.getElementById("selectionArme").innerHTML = x;

      if (x == 2) {
        document.getElementById("selectionArme").innerHTML = "<p>Vous avez choisi l' arme en Bois !</p><p>sont attaque est de 2 points</p>";

      } else if (x == 5) {
        document.getElementById("selectionArme").innerHTML = "<p>Vous avez choisi l' arme en fer !</p><p>sont attaque est de 5 points</p>";
      } else if (x == 10) {
        document.getElementById("selectionArme").innerHTML = "<p>Vous avez choisi l' arme magique !</p><p>sont attaque est de 10 points</p>";
      } else {
        document.getElementById("selectionArme").innerHTML = "<p>Selectionnez votre arme !</p>";
      }
      return x = document.getElementById("arme").value;
    }

    function choixArmure() {
      let y = document.getElementById("armure").value;
      document.getElementById("selectionArmure").innerHTML = y;
      if (y == 1) {
        document.getElementById("selectionArmure").innerHTML = "<p>Vous avez choisi l' armure en Bois !</p><p>sont attaque est de 1 points</p>";
      } else if (y == 3) {
        document.getElementById("selectionArmure").innerHTML = "<p>Vous avez choisi l' armure en fer !</p><p>sont attaque est de 3 points</p>";
      } else if (y == 5) {
        document.getElementById("selectionArmure").innerHTML = "<p>Vous avez choisi l' armure magique !</p><p>sont attaque est de 5 points</p>";
      } else {
        document.getElementById("selectionArmure").innerHTML = "<p>Selectionnez votre arme !</p>";
      }

    }




    function combattre() {
      choixArme();
      choixArmure();
      alert("Au combat !!!!");


      //L'aventurier possède 100 points de vie
      let aventurierVie = 0;
      //L'aventurier va avoir le choix entre 3 armes, chacune infligeant des dégâts plus ou moins élevés (bois: 2, fer: 5, magique: 10) et 3 armures, protégeant d'une certaine quantité de dégâts (bois : 1, fer: 3, magique: 5)
      let attaqueAventurier = parseInt(document.getElementById("arme").value);

      let defenseAventurier = parseInt(document.getElementById("armure").value);
      //Une fois l'équipement choisi, le combat avec le Maitre du Donjon commence.
      //Le Maitre du Donjon a 150 points de vie, inflige 6 points de dégâts par tour et possède une armure le protégeant de 4 points de dégâts

      // Le maitre du donjon possède 150 points de vie
      let maitreDonjonVie = 0;
      let attaquemaitreDonjon = 0;
      let defensemaitreDonjon = 0;


      //Les deux combattants s'attaquent mutuellement (le Maitre du Donjon commence) jusqu'à ce que les points de vie de l'un des deux atteigne 0
      let contenant = document.getElementById("debutCombat");
      let content = "";
      let atackMdonjon = 0;
      let attackAventurier = 0;

      // points de vie alléatoire

      vieMDalleatoire = document.getElementById("pvDonjon").checked
      if (vieMDalleatoire == true) {

        maitreDonjonVie = 125 + (Math.floor(Math.random()) * 50);
        aventurierVie = 100 + (Math.floor(Math.random()) * 25);
        attaquemaitreDonjon = 1 + (Math.floor(Math.random()) * 6);
        attaqueAventurier = 1 + (Math.floor(Math.random()) * parseInt(document.getElementById("arme").value));
        defensemaitreDonjon = 1 + (Math.floor(Math.random()) * 4);
        defenseAventurier = 1 + (Math.floor(Math.random()) * parseInt(document.getElementById("armure").value));
        alert(`alleatoire coché`);
        alert(`la vie de l avanturier est de ${aventurierVie} !`);
      } else {
        let aventurierVie = 100;
        let attaqueAventurier = parseInt(document.getElementById("arme").value);
        let defenseAventurier = parseInt(document.getElementById("armure").value);
        let maitreDonjonVie = 150;
        let attaquemaitreDonjon = 6;
        let defensemaitreDonjon = 4;
        alert(`alleatoire non coché`);
        alert(`la vie de l avanturier est de ${aventurierVie} !`);
      }




      //maitredonj attaque
      if (defenseAventurier - attaquemaitreDonjon > 0) {
        atackMdonjon = 0;
      } else {
        atackMdonjon = defenseAventurier - attaquemaitreDonjon;
      }

      //aventurier attaque
      if (defensemaitreDonjon - attaqueAventurier > 0) {
        attackAventurier = 0;
      } else {
        attackAventurier = defensemaitreDonjon - attaqueAventurier;
      }

      let i = 0;
      while (aventurierVie > 0 && maitreDonjonVie > 0) {

        //TOUR 1 
        if (i == 0) {
          content += `<div class="col-9 ps-5 bg-white text-start m-0 rounded-15 shadow-mDonjon"><b>TOUR : ${i + 1} :</b><p>
            <b class="text-primary">Le maitre du donjon commence</b> : il attaque : </p>
            <p>cela inflige 6 points de dégâts sur la vie de l'aventurier</p>
      <p>les points de l'aventurier sont maintenant de <b class="text-primary">${aventurierVie += atackMdonjon}</b >
      </p ></div > <div class="col-3 bg-dark text-start rounded-20"><img id="maitreDonjon" class="shadow-mDonjon" src="maitre-donjon.jpg"></div>`;
          contenant.innerHTML = content;

          // TOUS LES TOURS IMPAIRS
        } else if (i % 2 !== 0) {
          content += `<div class="col-3 bg-dark text-end rounded-20"><img id="chevalier" class="shadow-aventurier"  src="chevalier.jpg"></div>
      <div class="col-9 pe-5 bg-white text-end rounded-15 shadow-aventurier"><b>TOUR : ${i + 1} :</b>
        <p>Au tour de <b class="text-danger">L'aventurier</b> : il attaque  :</p>
        <p>cela inflige ${attaqueAventurier} points de dégâts sur la vie du maitre du donjon</p>
        <p>les points du du maitre du donjon sont maintenant de <b class="text-danger">${maitreDonjonVie += attackAventurier}</b>
        </p>
      </div>`;
          contenant.innerHTML = content;

          //TOUS LES TOURS PAIRS
        } else if (i % 2 == 0) {
          content += `
      <div class="col-9 ps-5 bg-white text-left rounded-15 shadow-mDonjon"><b>TOUR : ${i + 1} :</b>
        <p>Au tour du <b class="text-primary">maitre du donjon</b> : il attaque : </p>
        <p>cela inflige 6 points de dégâts sur la vie de l'aventurier</p>
        <p>les points de l'aventurier sont maintenant de <b class="text-primary">${aventurierVie += atackMdonjon}</b></p>
      </div>
      <div class="col-3 bg-dark text-start rounded-20"><img id="maitreDonjon" class="shadow-mDonjon" src="maitre-donjon.jpg"></div>`;
          contenant.innerHTML = content;
        }
        i++;
      }


      let idResultat = document.getElementById("resultat");
      let resultat = "";
      if (maitreDonjonVie > 0 && aventurierVie <= 0) {
        resultat += `<h2 class="display-3 winner text-center"><b>Le maitre du donjon a Gagné !</b></h2>
        <p class="text-center"><img id="maitreDonjon" class="shadow-mDonjon" src="maitre-donjon.jpg"></p>
        <small class="text-center text-white pb-3">Résumé du combat :</small>`;
        idResultat.innerHTML = resultat;
      } else if (aventurierVie > 0 && maitreDonjonVie <= 0) {
        resultat += `<h2 class="display-3 winner text-center"><b class="mx-2">L'aventurier a Gagné !</b></h2>
        <p class="text-center"><img id="chevalier" class="shadow-aventurier"  src="chevalier.jpg"></p>
        <small class="text-center text-white pb-3">Résumé du combat :</small>`;
        idResultat.innerHTML = resultat;
      } else {
        resultat += `<h2 class="display-3 winner text-center"><b>Aucun vainqueur c 'est l'egalité parfaite!</b></h2>
        <small class="text-center text-white pb-3">Résumé du combat :</small>`;
        idResultat.innerHTML = resultat;
      }
    }




  </script>
  <!--content end-->
  <!-- JavaScript -->
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.6.0/dist/umd/popper.min.js"
    integrity="sha384-KsvD1yqQ1/1+IA7gi3P0tyJcT3vR+NdBTt13hSJ2lnve8agRGXTTyNaBYmCR/Nwi"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.min.js"
    integrity="sha384-nsg8ua9HAw1y0W1btsyWgBklPnCUAFLuTMS2G72MMONqmOymq585AcH49TLBQObG"
    crossorigin="anonymous"></script>
</body>

</html>